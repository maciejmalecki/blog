---
title: Internet of Things done cheaply with ESP 8266
description: 
layout: post
post-url: esp8266
categories: smarthome iot esp8266 mcu
---
For some time I had an idea to do few "home improvements" and, as a side effect, learn a bit about microcontrollers and electronics. So called "smart home" can be expensive - there are a lot of out-of-the-box solutions that cost a small fortune (as I said: "for some time", now it is cheaper). So my idea really was: can I do it as cheap as possible?

After some research I decided to build my solution around some central software working on Raspberry Pi 3 and some amount of sensing- and command-nodes built with some cheap MCUs and radio transmitters, maybe even battery powered. My initial choice was to use AVR microcontrolers (yes, the ones from Arduino) and cheap NRF24L01 transceivers.

I wanted to build something looking like star (see diagram):

![Initial topology](http://www.plantuml.com/plantuml/proxy?cache=no&src=https://raw.githubusercontent.com/maciejmalecki/blog/master/sh/diagrams/basic-topology.puml)

So I've purchased several RF24 modules, few AVR, two Arduino Uno modules, a bootloader burning shield and even built a few prototype devices. But I also found several problems:
1. NRF24L01 has serious limitation - only 1 transmitting channel and only 4 receiving channels. That means I can use only up to 4 devices in star topology!
2. When used within building, the range of RF is seriously limited - star topology is anyway not achievable.
3. Each device must have unique address, so if I don't want to have this address configurable, I would most likely need an option to configure node (i.e. by pressing magic button while resetting).

Each of this problem is apparently solvable: you build mesh network out of RF24 modules, you can implement nice configuration capability via a serial interface, you can store configuration in EEPROM, etc. But this will consume more and more time to develop and test and if I don't have quick results, I easily get tired and annoyed. So the project was de facto suspended for few years. 

Until I've accidentally heard of ESP 8266 thing...

![WiFi topology](http://www.plantuml.com/plantuml/proxy?cache=no&src=https://raw.githubusercontent.com/maciejmalecki/blog/master/sh/diagrams/wifi-topology.puml)
